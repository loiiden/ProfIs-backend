import{a as B,b as de}from"../chunks/CiZ-rBY8.js";import"../chunks/DsnmJJEf.js";import{a1 as O,a2 as T,aa as z,a4 as x,a5 as A,a3 as v,a6 as r,a7 as a,ab as _,a0 as le,a8 as J,ai as oe,aR as ce,ac as K,o as t,a9 as N,aV as Q,e as ue,aT as me}from"../chunks/C-QRPYMU.js";import{h as _e}from"../chunks/DEZGI6pG.js";import{e as te,i as ae}from"../chunks/DLRb4NzI.js";import{r as pe,s as Y}from"../chunks/BvaJcb-S.js";import{s as $}from"../chunks/B_MYmuK7.js";import{s as V}from"../chunks/yPcTHBNh.js";import{s as fe}from"../chunks/Dx7UFYhn.js";import{O as ge}from"../chunks/BAv6hWvQ.js";import{c as re,i as be,s as se}from"../chunks/BJYZ7QGz.js";import{i as he}from"../chunks/D6BGfUMK.js";const ye=!1,ke=async({fetch:l})=>{let e=await l(`${B}/api/sws/main-user/current`);const s=await e.json();e=await l(`${B}/api/event/next`);const i=await e.json();e=await l(`${B}/api/scientific-work`);const o=await e.json();e=await l(`${B}/api/study-program`);const m=await e.json();e=await l(`${B}/api/student`);const c=await e.json();e=await l(`${B}/api/evaluator`);const n=await e.json();return e=await l(`${B}/api/mark/info`),{marks:await e.json(),sws:{current:s,target:2},termine:i,sworks:o,study_programs:m,students:c,referents:n}},Ue=Object.freeze(Object.defineProperty({__proto__:null,load:ke,ssr:ye},Symbol.toStringTag,{value:"Module"}));var we=T('<div class="comment-arbeit-container stroke-style svelte-tdvpb3"><p class="style-med svelte-tdvpb3">Kommentar:</p> <div class="style-small svelte-tdvpb3"> </div></div>');function xe(l,e){O(e,!0);var s=we(),i=v(r(s),2),o=r(i,!0);a(i),a(s),z(()=>_(o,e.kommentar)),x(l,s),A()}var Te=T('<div><div class="left-side svelte-1ycr81h"><div class="style-large svelte-1ycr81h"> </div> <div class="style-small svelte-1ycr81h"> </div> <div class="style-small svelte-1ycr81h"> </div></div> <span class="swork-status svelte-1ycr81h"><p class="svelte-1ycr81h"><img alt="" class="svelte-1ycr81h"/></p> <p class="svelte-1ycr81h"> </p> <p class="svelte-1ycr81h"> </p></span></div>'),je=T('<div class="filter-arbeiten-container stroke-style svelte-1ycr81h"><div class="search svelte-1ycr81h"><img alt="" class="svelte-1ycr81h"/> <input type="text" class="search-input svelte-1ycr81h" placeholder="Suche nach Studenten"/></div> <div class="scroll-area svelte-1ycr81h"></div></div> <!> <!>',1);function Se(l,e){O(e,!0);let s={};e.study_programs.forEach(d=>{s[d.id]=d.degreeType+" in "+d.title});let i={};e.students.forEach(d=>{i[d.id]=d});let o={};e.referents.forEach(d=>{o[d.id]=d});let m=J(""),c=J(0),n=N(()=>t(c)!==null?t(p)[t(c)]:null),f=N(()=>e.sworks),p=J(oe(e.sworks));var g=je(),w=ce(g),b=r(w),h=r(b),j=v(h,2);pe(j),j.__input=()=>{K(p,t(f).filter(d=>(i[d.studentId].firstName+" "+i[d.studentId].lastName).toLowerCase().includes(t(m).toLowerCase())),!0)},a(b);var S=v(b,2);te(S,21,()=>t(p),ae,(d,u,E)=>{var M=Te();M.__click=()=>{K(c,E,!0)};var C=r(M),L=r(C),R=r(L,!0);a(L);var P=v(L,2),Z=r(P,!0);a(P);var q=v(P,2),U=r(q,!0);a(q),a(C);var H=v(C,2);let I;var D=r(H),W=r(D);a(D);var k=v(D,2),ve=r(k,!0);a(k);var ee=v(k,2),ie=r(ee,!0);a(ee),a(H),a(M),z(ne=>{$(M,1,`list-item ${t(c)===E?"active":""}`,"svelte-1ycr81h"),_(R,i[t(u).studentId].firstName+" "+i[t(u).studentId].lastName),_(Z,s[t(u).studyProgramId]),_(U,t(u).title),I=V(H,"",I,{color:t(u).status?re[t(u).status.eventType]:"#3B4B55"}),Y(W,"src",t(u).status?be[t(u).status.eventType]:bookmark),_(ve,t(u).status?.eventType?se[t(u).status.eventType]:"-"),_(ie,ne)},[()=>t(u).status?.eventDate?String(t(u).status.eventDate.toReversed()).replaceAll(",","."):"-"]),x(d,M)}),a(S),a(w);var y=v(w,2);ge(y,{get swork(){return t(n)},get studmap(){return i},get progmap(){return s},get refmap(){return o}});var F=v(y,2);{let d=N(()=>t(n)?t(n).comment:"");xe(F,{get kommentar(){return t(d)}})}z(()=>Y(h,"src",fe)),de(j,()=>t(m),d=>K(m,d)),x(l,g),A()}le(["input","click"]);var De=T('<div class="overview-sws-container stroke-style svelte-bovrtd"><h3 class="svelte-bovrtd">SWS</h3> <div class="content-row svelte-bovrtd"><div class="chart-area svelte-bovrtd"><div class="bar-track svelte-bovrtd"><div class="bar-fill svelte-bovrtd"></div></div></div> <div class="info-area svelte-bovrtd"><div class="stat-block secondary svelte-bovrtd"><span class="value svelte-bovrtd"> </span> <span class="label svelte-bovrtd">Ziel</span></div> <div class="stat-block primary svelte-bovrtd"><span> </span> <span class="label svelte-bovrtd">Jetzt</span></div> <div class="spacer svelte-bovrtd"></div></div></div></div>');function Ne(l,e){O(e,!0);let s=N(()=>Number(e.target??null)),i=N(()=>Number(e.current??0)),o=N(()=>t(s)>0?Math.min(t(i)/t(s)*100,100):0),m=N(()=>t(i)>t(s));var c=De(),n=v(r(c),2),f=r(n),p=r(f),g=r(p);a(p),a(f);var w=v(f,2),b=r(w),h=r(b),j=r(h,!0);a(h),Q(2),a(b);var S=v(b,2),y=r(S),F=r(y,!0);a(y),Q(2),a(S),Q(2),a(w),a(n),a(c),z((d,u)=>{V(g,`height: ${t(o)??""}%;`),_(j,d),$(y,1,`value ${t(m)?"alarm":""}`,"svelte-bovrtd"),_(F,u)},[()=>t(s).toFixed(1),()=>t(i).toFixed(1)]),x(l,c),A()}var ze=T('<div class="termin svelte-4d8jkm"><p class="svelte-4d8jkm"><span class="color svelte-4d8jkm"></span> <span class="style-med svelte-4d8jkm"><a class="svelte-4d8jkm"> </a></span> </p> <p class="svelte-4d8jkm"> </p></div>'),Fe=T('<div class="overview-termine-container stroke-style svelte-4d8jkm"><p class="style-med svelte-4d8jkm">Nächste Termine</p> <div class="termine svelte-4d8jkm"></div></div>');function Ie(l,e){O(e,!0);let s=e.termine;function i(c){if(c===null)return;const n=new Date,p=new Date(String(c).replaceAll(",","-"))-n,g=Math.ceil(p/(1e3*3600*24));if(g==0)return"Heute";if(g==1)return"Morgen";if(g>1)return`In ${g} Tagen`}var o=Fe(),m=v(r(o),2);te(m,21,()=>s,ae,(c,n)=>{var f=ze(),p=r(f),g=r(p);let w;var b=v(g,2),h=r(b),j=r(h);a(h),a(b);var S=v(b);a(p);var y=v(p,2),F=r(y,!0);a(y),a(f),z((d,u)=>{w=V(g,"",w,{"background-color":re[t(n).eventType]}),Y(h,"href",`/erstellen/arbeit?id=${t(n).scientificWorkId}`),_(j,`${d??""}, ${u??""}`),_(S,` ${(t(n).eventType?se[t(n).eventType]:"-")??""},`),_(F,(t(n).studentFirstName??"")+" "+(t(n).studentLastName??""))},[()=>t(n).eventDate?i(t(n).eventDate):"-",()=>t(n).eventDate?String(t(n).eventDate.toReversed().splice(0,2)).replaceAll(",","."):"-"]),x(c,f)}),a(m),a(o),x(l,o),A()}var Oe=T("<div> </div>");function G(l,e){O(e,!0);var s=Oe(),i=r(s,!0);a(s),z(()=>{$(s,1,`colored-number ${e.color??""}`,"svelte-vtfrsj"),_(i,e.number)}),x(l,s),A()}var Ae=T('<div class="annotated-number svelte-1on7pxd"><div class="number svelte-1on7pxd"> </div> <div class="annotation svelte-1on7pxd"> </div></div>');function X(l,e){O(e,!0);var s=Ae(),i=r(s),o=r(i,!0);a(i);var m=v(i,2),c=r(m,!0);a(m),a(s),z(()=>{_(o,e.number),_(c,e.annotation)}),x(l,s),A()}var Me=T('<div class="average-mark svelte-3d7vav"><!> <div class="vertical-long-line svelte-3d7vav"></div></div>'),Ce=T('<div class="noten-skala-container stroke-style svelte-3d7vav"><div class="mark-information"><!> <!></div> <div class="skala svelte-3d7vav"><div class="marks svelte-3d7vav"><!> <!> <!> <!> <!></div> <div class="lines svelte-3d7vav"><div class="vertical svelte-3d7vav"></div> <div class="horizontal mark4 svelte-3d7vav"></div> <div class="vertical svelte-3d7vav"></div> <div class="horizontal mark3 svelte-3d7vav"></div> <div class="vertical svelte-3d7vav"></div> <div class="horizontal mark2 svelte-3d7vav"></div> <div class="vertical svelte-3d7vav"></div> <div class="horizontal mark1 svelte-3d7vav"></div> <div class="vertical svelte-3d7vav"></div></div> <div class="distribution svelte-3d7vav"><div class="distri four svelte-3d7vav"> </div> <div class="distri three svelte-3d7vav"> </div> <div class="distri two svelte-3d7vav"> </div> <div class="distri one svelte-3d7vav"> </div></div> <!></div> <div class="annotation-marks svelte-3d7vav"><p class="svelte-3d7vav">Grundnote</p> <p class="s-count svelte-3d7vav">Anzahl Studenten</p></div></div>');function We(l,e){O(e,!0);let s=N(()=>e.distribution);function i(I,D){let W=Math.pow(10,D),k=Math.round(I*W)/W;return k=k.toFixed(2),k[3]=="0"?k.substring(0,k.length-1):k}let o=N(()=>i(e.average,2)),m=-37+(5-t(o))/4*532,c=J(57),n=J(0);(t(o)%1<.14||t(o)%1>.86)&&(K(c,23),K(n,35));var f=Ce(),p=r(f),g=r(p);X(g,{get number(){return e.bewertet},annotation:"Bewertet"});var w=v(g,2);X(w,{get number(){return e.offen},annotation:"Offen"}),a(p);var b=v(p,2),h=r(b),j=r(h);G(j,{number:"5,0",color:"mark5"});var S=v(j,2);G(S,{number:"4,0",color:"mark4"});var y=v(S,2);G(y,{number:"3,0",color:"mark3"});var F=v(y,2);G(F,{number:"2,0",color:"mark2"});var d=v(F,2);G(d,{number:"1,0",color:"mark1"}),a(h);var u=v(h,4),E=r(u),M=r(E,!0);a(E);var C=v(E,2),L=r(C,!0);a(C);var R=v(C,2),P=r(R,!0);a(R);var Z=v(R,2),q=r(Z,!0);a(Z),a(u);var U=v(u,2);{var H=I=>{var D=Me(),W=r(D);X(W,{get number(){return t(o)},annotation:"Durchschnitt"});var k=v(W,2);a(D),z(()=>{V(D,`left: ${m}px;`),V(k,`height: ${t(c)??""}px;margin-top: ${t(n)??""}px;`)}),x(I,D)};he(U,I=>{parseFloat(t(o))!==0&&I(H)})}a(b),Q(2),a(f),z(()=>{_(M,t(s).fromFourToFive),_(L,t(s).fromThreeToFour),_(P,t(s).fromTwoToThree),_(q,t(s).fromOneToTwo)}),x(l,f),A()}var Be=T('<main class="overview-container svelte-1uha8ag"><div class="headline-s svelte-1uha8ag">ÜBERSICHT</div> <!> <!> <!> <!></main>');function Xe(l,e){O(e,!0);var s=Be();_e("1uha8ag",n=>{ue(()=>{me.title="ProfIS"})});var i=v(r(s),2);Se(i,{get sworks(){return e.data.sworks},get study_programs(){return e.data.study_programs},get students(){return e.data.students},get referents(){return e.data.referents}});var o=v(i,2);Ne(o,{get target(){return e.data.sws.target},get current(){return e.data.sws.current}});var m=v(o,2);Ie(m,{get termine(){return e.data.termine}});var c=v(m,2);We(c,{get bewertet(){return e.data.marks.countArchivedScientificWorks},get offen(){return e.data.marks.countsOpenScientificWorks},get average(){return e.data.marks.averageMarkForAllScientificWorks},get distribution(){return e.data.marks.distribution}}),a(s),x(l,s),A()}export{Xe as component,Ue as universal};
