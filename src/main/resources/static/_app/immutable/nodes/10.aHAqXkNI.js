import{a as ce,b as Te,G as Ee}from "../chunks/CiZ-rBY8.js";import"../chunks/DsnmJJEf.js";import{a0 as Ae,a1 as Pe,a8 as S,ai as Q,a2 as q,a3 as l,a6 as r,ac as m,o as a,aa as N,a4 as f,a5 as Me,e as Ie,aT as Ce,a7 as s,ab as i,a9 as De,aR as Oe}from "../chunks/C-QRPYMU.js";import{i as de}from "../chunks/D6BGfUMK.js";import{e as V,i as X}from "../chunks/DLRb4NzI.js";import{h as We}from "../chunks/DEZGI6pG.js";import{r as ze,s as g}from "../chunks/BvaJcb-S.js";import{s as Be}from "../chunks/yPcTHBNh.js";import{c as Fe,s as Ge}from "../chunks/BJYZ7QGz.js";import{s as Le}from "../chunks/Dx7UFYhn.js";import{o as Re}from "../chunks/DTvbOTB6.js";import{c as Ue,a as $e}from "../chunks/DrIvBmwU.js";const Ze=!1,He=async({fetch:T,params:h})=>{const y=await(await T(`${ce}/api/student`)).json(),b=await(await T(`${ce}/api/study-program`)).json();return{students:y,study_programs:b}},pa=Object.freeze(Object.defineProperty({__proto__:null,load:He,ssr:Ze},Symbol.toStringTag,{value:"Module"}));var Je=q('<div class="study-program svelte-j85uqj"> </div>'),Ke=q('<div class="filter-popup stroke-style svelte-j85uqj"><span class="filter-heading svelte-j85uqj">Studiengang</span> <div class="filter-study-program svelte-j85uqj"></div></div>'),Qe=q('<div class="student-row svelte-j85uqj"><span class="stu-name svelte-j85uqj"><a><img class="open-new svelte-j85uqj" alt=""/></a> </span> <span class="stu-num svelte-j85uqj"> </span> <span class="stu-program svelte-j85uqj"> </span> <span class="stu-email svelte-j85uqj"><a> </a></span></div>'),Ve=q('<div class="work svelte-j85uqj"><div class="work-status svelte-j85uqj"><span class="color svelte-j85uqj"></span> <span class="work-event svelte-j85uqj"><p class="svelte-j85uqj"> </p> <p class="svelte-j85uqj"> </p></span></div> <span class="work-program svelte-j85uqj"> </span> <span class="work-title svelte-j85uqj"> </span></div>'),Xe=q('<div class="current-student svelte-j85uqj"><span class="cur-anrede svelte-j85uqj"> </span> <span class="cur-name svelte-j85uqj"> </span> <span class="cur-mat svelte-j85uqj"> </span> <span class="cur-email svelte-j85uqj"> </span> <span class="cur-tel svelte-j85uqj"> </span></div> <div class="aktuelle-arbeiten svelte-j85uqj">Aktive Arbeiten</div> <div class="connected-works-list svelte-j85uqj"></div>',1),Ye=q('<div class="not-selected svelte-j85uqj">Noch keinen Studenten ausgewählt!</div>'),ea=q('<div class="student-filter-table-container svelte-j85uqj"><div class="headline-s svelte-j85uqj">STUDENTEN</div> <div class="student-table-container stroke-style svelte-j85uqj"><div class="search-bar svelte-j85uqj"><div class="search svelte-j85uqj"><img alt="" class="svelte-j85uqj"/> <input type="text" class="search-input svelte-j85uqj" placeholder="Studenten suchen"/></div> <div class="filter-container svelte-j85uqj"><span class="reset-filter stroke-style svelte-j85uqj">Zurücksetzen</span> <span class="show-filter stroke-style svelte-j85uqj"> <img alt="" class="svelte-j85uqj"/></span> <!></div></div> <div class="table-head svelte-j85uqj"><span class="head-name svelte-j85uqj">Student</span> <span class="head-num svelte-j85uqj">Matrikel</span> <span class="head-program svelte-j85uqj">Studiengang</span> <span class="head-email svelte-j85uqj">E-Mail</span></div> <div class="student-table svelte-j85uqj"></div></div> <div class="connected-works stroke-style svelte-j85uqj"><!></div></div>');function _a(T, h){Pe(h,!0);let M=h.data.students,y=S(Q(h.data.students)),Y=h.data.study_programs,b={};h.data.study_programs.forEach(e=>{b[e.id]=e.degreeType+" in "+e.title});let I=S(""),d=Q([]),E=S(!1),pe=De(()=>d.length>0);function C(){m(y,M.filter(e=>(e.firstName+" "+e.lastName+" "+e.email).includes(a(I))),!0),d.length>0&&m(y,a(y).filter(e=>d.includes(e.studyProgramId)),!0)}function D(){let e=document.querySelector(".filter-study-program");if(e!=null)for(let t of e.children){let n=Number(t.getAttribute("data-st-id"));d.includes(n)?(t.style.fontWeight="700",t.style.color="#000000"):(t.style.fontWeight="400",t.style.color="#3c3c3c")}}function _e(e){d.includes(e)?d.splice(d.indexOf(e),1):d.push(e),D(),C()}let o=S(0),O=S(Q([])),W={};async function je(e){return Ee(`/api/student/${e}/shortWorks`)}async function me(e){if(m(o,M.filter(t=>t.id==e)[0],!0),e in W)m(O,W[e],!0);else{let t=await je(e);W[e]=t,m(O,t,!0)}}var z=ea();We("j85uqj", e=>{Ie(()=>{Ce.title="Studenten - ProfIS"})});var B=l(r(z),2),F=r(B),G=r(F),ee=r(G),L=l(ee,2);ze(L),L.__input=C,s(G);var ae=l(G,2),se=r(ae);se.__click=()=>{d.splice(0),D(),C()};var A=l(se,2);A.__click=()=>{m(E,!a(E)),setTimeout(()=>{D()},10)};var te=r(A,!0),fe=l(te);s(A);var ge=l(A,2);{var qe= e=>{var t=Ke(),n=l(r(t),2);V(n,21,()=>Y,X,(c, v)=>{var u=Je();u.__click=()=>{_e(a(v).id)};var k=r(u,!0);s(u),N(()=>{g(u,"data-st-id",a(v).id),i(k,a(v).degreeType+" in "+a(v).title)}),f(c,u)}),s(n),s(t),f(e,t)};de(ge, e=>{a(E)&&e(qe)})}s(ae),s(F);var re=l(F,4);V(re,21,()=>a(y),X,(e, t)=>{var n=Qe(),c=r(n);c.__click=()=>{me(a(t).id)};var v=r(c),u=r(v);s(v);var k=l(v,1,!0);s(c);var j=l(c,2),R=r(j,!0);s(j);var p=l(j,2),U=r(p,!0);s(p);var x=l(p,2),w=r(x),P=r(w,!0);s(w),s(x),s(n),N(()=>{g(v,"href",`/erstellen/student/?id=${a(t).id??""}`),g(u,"src",Re),i(k,a(t).firstName+" "+a(t).lastName),i(R,a(t).studentNumber),g(p,"title",b[a(t).studyProgramId]),i(U,b[a(t).studyProgramId]),g(w,"href",`mailto:${a(t).email??""}`),i(P,a(t).email)}),f(e,n)}),s(re),s(B);var le=l(B,2),he=r(le);{var ye= e=>{var t=Xe(),n=Oe(t),c=r(n),v=r(c,!0);s(c);var u=l(c,2),k=r(u,!0);s(u);var j=l(u,2),R=r(j);s(j);var p=l(j,2),U=r(p);s(p);var x=l(p,2),w=r(x);s(x),s(n);var P=l(n,4);V(P,21,()=>a(O),X,($, _)=>{var Z=Ve(),H=r(Z),ie=r(H);let ne;var ve=l(ie,2),J=r(ve),ke=r(J,!0);s(J);var ue=l(J,2),xe=r(ue,!0);s(ue),s(ve),s(H);var K=l(H,2),we=r(K,!0);s(K);var oe=l(K,2),Se=r(oe,!0);s(oe),s(Z),N(Ne=>{ne=Be(ie,"",ne,{"background-color":a(_).status?Fe[a(_).status.eventType]:"#3B4B55"}),i(ke,a(_).status?.eventType?Ge[a(_).status.eventType]:"-"),i(xe,Ne),i(we,a(_).StudyProgramTitle),i(Se,a(_).title)},[()=>a(_).status?.eventDate?String(a(_).status.eventDate.toReversed()).replaceAll(",","."):"-"]),f($,Z)}),s(P),N($=>{i(v,$),i(k,a(o).firstName+" "+a(o).lastName),i(R,`Matrikelnummer: ${a(o).studentNumber??""}`),i(U,`E-Mail: ${a(o).email??""}`),i(w,`Telefon: ${a(o).phoneNumber??""}`)},[()=>a(o).salutation!==null?String(a(o).salutation).toLowerCase().charAt(0).toUpperCase()+String(a(o).salutation).toLowerCase().slice(1):"-"]),f(e,t)},be= e=>{var t=Ye();f(e,t)};de(he, e=>{a(o)!=0?e(ye):e(be,!1)})}s(le),s(z),N(()=>{g(ee,"src",Le),i(te,a(pe)?"Filter: Ein":"Filter: Aus"),g(fe,"src",a(E)?Ue:$e)}),Te(L,()=>a(I), e=>m(I,e)),f(T,z),Me()}Ae(["input","click"]);export{_a as component,pa as universal};
