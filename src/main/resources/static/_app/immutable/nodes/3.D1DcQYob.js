import{a as G,b as pt,G as dt}from"../chunks/CiZ-rBY8.js";import"../chunks/DsnmJJEf.js";import{a0 as ut,a1 as ft,a8 as z,ai as Y,a2 as S,a3 as r,a6 as l,ac as g,o as e,aa as R,a4 as f,a5 as _t,e as ht,aT as mt,a7 as s,ab as i,a9 as gt,aW as jt,aR as yt,aX as xt}from"../chunks/C-QRPYMU.js";import{i as Se}from"../chunks/D6BGfUMK.js";import{e as ee,i as te}from"../chunks/DLRb4NzI.js";import{h as bt}from"../chunks/DEZGI6pG.js";import{r as kt,s as k}from"../chunks/BvaJcb-S.js";import{s as Oe}from"../chunks/yPcTHBNh.js";import{i as St}from"../chunks/CtAzj6bH.js";import{s as Et}from"../chunks/Dx7UFYhn.js";import{c as It,a as At}from"../chunks/DrIvBmwU.js";import{c as We,i as wt,s as Ee,p as Tt,a as Ke}from"../chunks/BJYZ7QGz.js";const qt=!1,Nt=async({fetch:I,params:j})=>{const u=await(await I(`${G}/api/student`)).json(),A=await(await I(`${G}/api/study-program`)).json(),_=await(await I(`${G}/api/scientific-work`)).json(),d=await(await I(`${G}/api/evaluator`)).json();return{students:u,study_programs:A,sworks:_,referenten:d}},Yt=Object.freeze(Object.defineProperty({__proto__:null,load:Nt,ssr:qt},Symbol.toStringTag,{value:"Module"})),Dt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='%23AF4357'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpolyline%20points='3%206%205%206%2021%206'%3e%3c/polyline%3e%3cpath%20d='M19%206v14a2%202%200%200%201-2%202H7a2%202%200%200%201-2-2V6m3%200V4a2%202%200%200%201%202-2h4a2%202%200%200%201%202%202v2'%3e%3c/path%3e%3cline%20x1='10'%20y1='11'%20x2='10'%20y2='17'%3e%3c/line%3e%3cline%20x1='14'%20y1='11'%20x2='14'%20y2='17'%3e%3c/line%3e%3c/svg%3e";var Rt=S('<div class="status svelte-jf2h65"> </div>'),Pt=S('<div class="study-program svelte-jf2h65"> </div>'),$t=S('<div class="filter-popup stroke-style svelte-jf2h65"><span class="filter-heading svelte-jf2h65">Status</span> <div class="filter-status svelte-jf2h65"></div> <span class="filter-heading svelte-jf2h65">Studiengang</span> <div class="filter-study-program svelte-jf2h65"></div></div>'),Bt=S('<div class="sworks-row svelte-jf2h65"><span class="swork-name svelte-jf2h65"><p class="svelte-jf2h65"> </p> <span class="svelte-jf2h65"> </span></span> <span class="swork-status svelte-jf2h65"><p class="svelte-jf2h65"><img alt="" class="svelte-jf2h65"/></p> <p class="svelte-jf2h65"> </p> <p class="svelte-jf2h65"> </p></span> <span class="swork-start svelte-jf2h65"> </span> <span class="swork-end svelte-jf2h65"> </span> <span class="swork-kolloq svelte-jf2h65"><p class="svelte-jf2h65"> </p> <p class="svelte-jf2h65"> </p></span></div>'),Lt=S('<div class="work-status svelte-jf2h65"><span class="color svelte-jf2h65"></span> <span class="work-event svelte-jf2h65"><p class="svelte-jf2h65"> </p> <p class="svelte-jf2h65"> </p></span></div>'),Ot=S('<div class="current-swork svelte-jf2h65"><div class="action-btns svelte-jf2h65"><span class="action-label svelte-jf2h65">Bearbeiten / Löschen?</span> <a class="edit-btn svelte-jf2h65"><img alt="Bearbeiten" class="svelte-jf2h65"/></a> <button class="delete-btn svelte-jf2h65"><img alt="Löschen" class="svelte-jf2h65"/></button></div> <span class="style-large svelte-jf2h65"> </span> <span class="style-small ellipsis svelte-jf2h65"> </span> <span class="style-small svelte-jf2h65"> </span> <span class="style-large top-gap svelte-jf2h65">Verlauf:</span> <div class="events-verlauf svelte-jf2h65"><!></div> <span class="style-large top-gap svelte-jf2h65">Kommentar:</span> <span class="style-small svelte-jf2h65"> </span> <span class="style-large top-gap svelte-jf2h65">Termine:</span> <span class="style-small svelte-jf2h65"> </span> <span class="style-small svelte-jf2h65"> </span> <span class="style-small top-gap svelte-jf2h65"> </span> <span class="style-small svelte-jf2h65"> </span> <span class="style-small svelte-jf2h65"> </span> <span class="style-small svelte-jf2h65"> </span> <span class="style-large top-gap svelte-jf2h65"> </span> <span class="style-small svelte-jf2h65"> </span> <span class="style-small svelte-jf2h65"> </span> <span class="style-large top-gap svelte-jf2h65"> </span> <span class="style-small svelte-jf2h65"> </span> <span class="style-small svelte-jf2h65"> </span></div>'),Wt=S('<div class="not-selected svelte-jf2h65">Noch keine Arbeit ausgewählt!</div>'),Kt=S('<div class="sworks-filter-table-container svelte-jf2h65"><div class="headline-s svelte-jf2h65">ARBEITEN</div> <div class="sworks-table-container stroke-style svelte-jf2h65"><div class="search-bar svelte-jf2h65"><div class="search svelte-jf2h65"><img alt="" class="svelte-jf2h65"/> <input type="text" class="search-input svelte-jf2h65" placeholder="Arbeit suchen"/></div> <div class="filter-container svelte-jf2h65"><span class="reset-filter stroke-style svelte-jf2h65">Zurücksetzen</span> <span class="show-filter stroke-style svelte-jf2h65"> <img alt="" class="svelte-jf2h65"/></span> <!></div></div> <div class="table-head svelte-jf2h65"><span class="head-name svelte-jf2h65">Titel, Studiengang, Name</span> <span class="head-status svelte-jf2h65">Status</span> <span class="head-start svelte-jf2h65">Startdatum</span> <span class="head-end svelte-jf2h65">Abgabedatum</span> <span class="head-kolloq svelte-jf2h65">Kolloquiumsdatum</span></div> <div class="sworks-table svelte-jf2h65"></div></div> <div class="sworks-short stroke-style svelte-jf2h65"><!></div></div>');function es(I,j){ft(j,!0);let P=j.data.sworks,u=z(Y(j.data.sworks)),Ie=j.data.study_programs,A={};j.data.study_programs.forEach(t=>{A[t.id]=(t.degreeType??"-")+" in "+(t.title??"-")});let y={};j.data.students.forEach(t=>{y[t.id]=t});let _={};j.data.referenten.forEach(t=>{_[t.id]=t});let H=z(""),d=Y([]),x=Y([]),U=z(!1),Me=gt(()=>d.length>0);function X(){g(u,P.filter(t=>(t.title+" "+A[t.studyProgramId]+", "+(y[t.studentId]?.firstName??"")+" "+(y[t.studentId]?.lastName??"")).includes(e(H))),!0),d.length>0&&g(u,e(u).filter(t=>d.includes(t.studyProgramId)),!0),x.length>0&&g(u,e(u).filter(t=>t.status?x.includes(t.status.eventType):!1),!0)}function se(){let t=document.querySelector(".filter-study-program");if(t!=null)for(let a of t.children){let o=Number(a.getAttribute("data-st-id"));d.includes(o)?(a.style.fontWeight="700",a.style.color="#000000"):(a.style.fontWeight="400",a.style.color="#3c3c3c")}}function Ve(t){d.includes(t)?d.splice(d.indexOf(t),1):d.push(t),se(),X()}function ae(){let t=document.querySelector(".filter-status");if(t!=null)for(let a of t.children){let o=a.getAttribute("data-status");x.includes(o)?(a.style.fontWeight="700",a.style.color="#000000"):(a.style.fontWeight="400",a.style.color="#3c3c3c")}}function Ce(t){x.includes(t)?x.splice(x.indexOf(t),1):x.push(t),ae(),X()}let n=z(0),le=z(Y([]));async function Fe(t){return dt(`/api/scientific-work/${t}/events`)}async function ze(t){g(n,P.filter(a=>a.id==t)[0],!0),g(le,await Fe(t),!0)}async function Ge(t){confirm("Arbeit wirklich löschen?")&&(await fetch(`${G}/api/scientific-work/${t}`,{method:"DELETE"}),P=P.filter(a=>a.id!=t),g(u,e(u).filter(a=>a.id!=t),!0),g(n,0),await St())}const He=["PROPOSAL","DISCUSSION","FINAL_SUBMISSION","REVIEW","ARCHIVE","ABORT"];var re=Kt();bt("jf2h65",t=>{ht(()=>{mt.title="Arbeiten - ProfIS"})});var ne=r(l(re),2),ie=l(ne),ve=l(ie),Ae=l(ve),oe=r(Ae,2);kt(oe),oe.__input=X,s(ve);var we=r(ve,2),Te=l(we);Te.__click=()=>{d.splice(0),x.splice(0),se(),ae(),X()};var Z=r(Te,2);Z.__click=()=>{g(U,!e(U)),setTimeout(()=>{se(),ae()},10)};var qe=l(Z,!0),Ue=r(qe);s(Z);var Xe=r(Z,2);{var Ze=t=>{var a=$t(),o=r(l(a),2);ee(o,21,()=>He,te,(h,c)=>{var v=Rt();v.__click=()=>{Ce(e(c))};var m=l(v,!0);s(v),R(()=>{k(v,"data-status",e(c)),i(m,Ee[e(c)])}),f(h,v)}),s(o);var p=r(o,4);ee(p,21,()=>Ie,te,(h,c)=>{var v=Pt();v.__click=()=>{Ve(e(c).id)};var m=l(v,!0);s(v),R(()=>{k(v,"data-st-id",e(c).id),i(m,e(c).degreeType+" in "+e(c).title)}),f(h,v)}),s(p),s(a),f(t,a)};Se(Xe,t=>{e(U)&&t(Ze)})}s(we),s(ie);var Ne=r(ie,4);ee(Ne,21,()=>e(u),te,(t,a)=>{var o=Bt(),p=l(o);p.__click=()=>{ze(e(a).id)};var h=l(p),c=l(h,!0);s(h);var v=r(h,2),m=l(v);s(v),s(p);var w=r(p,2);let T;var $=l(w),B=l($);s($);var L=r($,2),O=l(L,!0);s(L);var J=r(L,2),ce=l(J,!0);s(J),s(w);var W=r(w,2),K=l(W,!0);s(W);var M=r(W,2),V=l(M,!0);s(M);var Q=r(M,2),E=l(Q),pe=l(E,!0);s(E);var q=r(E,2),de=l(q,!0);s(q),s(Q),s(o),R((C,ue,F,fe)=>{i(c,e(a).title),i(m,`${A[e(a).studyProgramId]??""}, ${(y[e(a).studentId]?.firstName??"")+" "+(y[e(a).studentId]?.lastName??"-")}`),T=Oe(w,"",T,{color:e(a).status?We[e(a).status.eventType]:"#3B4B55"}),k(B,"src",e(a).status?.eventType?wt[e(a).status.eventType]:bookmark),i(O,e(a).status?.eventType?Ee[e(a).status.eventType]:"-"),i(ce,C),i(K,ue),i(V,F),i(pe,fe),i(de,(e(a).presentationStart??"")+" "+(e(a).colloquiumLocation??""))},[()=>e(a).status?.eventDate?String(e(a).status.eventDate.toReversed()).replaceAll(",","."):"-",()=>e(a).startDate?String(e(a).startDate.toReversed()).replaceAll(",","."):"-",()=>e(a).endDate?String(e(a).endDate.toReversed()).replaceAll(",","."):"-",()=>e(a).colloquium?String(e(a).colloquium.toReversed().splice(2)).replaceAll(",","."):"-"]),f(t,o)}),s(Ne),s(ne);var De=r(ne,2),Je=l(De);{var Qe=t=>{var a=Ot(),o=l(a),p=r(l(o),2),h=l(p);s(p);var c=r(p,2);c.__click=()=>Ge(e(n).id);var v=l(c);s(c),s(o);var m=r(o,2),w=l(m,!0);s(m);var T=r(m,2),$=l(T,!0);s(T);var B=r(T,2),L=l(B,!0);s(B);var O=r(B,4),J=l(O);{var ce=b=>{var N=jt(),xe=yt(N);ee(xe,17,()=>e(le),te,(it,D)=>{var be=Lt(),Pe=l(be);let $e;var Be=r(Pe,2),ke=l(Be),vt=l(ke,!0);s(ke);var Le=r(ke,2),ot=l(Le,!0);s(Le),s(Be),s(be),R(ct=>{$e=Oe(Pe,"",$e,{"background-color":e(D).eventType?We[e(D).eventType]:"#3B4B55"}),i(vt,e(D).eventType?Ee[e(D).eventType]:"-"),i(ot,ct)},[()=>e(D).eventDate?String(e(D).eventDate.toReversed()).replaceAll(",","."):"-"]),f(it,be)}),f(b,N)},W=b=>{var N=xt("-");f(b,N)};Se(J,b=>{e(le).length>0?b(ce):b(W,!1)})}s(O);var K=r(O,4),M=l(K,!0);s(K);var V=r(K,4),Q=l(V);s(V);var E=r(V,2),pe=l(E);s(E);var q=r(E,2),de=l(q);s(q);var C=r(q,2),ue=l(C);s(C);var F=r(C,2),fe=l(F);s(F);var _e=r(F,2),et=l(_e);s(_e);var he=r(_e,2),tt=l(he);s(he);var me=r(he,2),st=l(me);s(me);var ge=r(me,2),at=l(ge);s(ge);var je=r(ge,2),lt=l(je);s(je);var ye=r(je,2),rt=l(ye);s(ye);var Re=r(ye,2),nt=l(Re);s(Re),s(a),R((b,N,xe)=>{k(p,"href",`/erstellen/arbeit?id=${e(n).id??""}`),k(h,"src",Tt),k(v,"src",Dt),i(w,e(n).title??"-"),i($,A[e(n).studyProgramId]),i(L,(y[e(n).studentId]?.firstName??"")+" "+(y[e(n).studentId]?.lastName??"-")),i(M,e(n).comment??"-"),i(Q,`Startdatum: ${b??""}`),i(pe,`Abgabedatum: ${N??""}`),i(de,`Kolloquiumsdatum: ${xe??""}`),i(ue,`Kolloquiumsort: ${e(n).colloquiumLocation??"-"??""}`),i(fe,`Präsentation: ${e(n).presentationStart??"-"??""} - ${e(n).presentationEnd??"-"??""}`),i(et,`Diskussions: ${e(n).discussionStart??"-"??""} - ${e(n).discussionEnd??"-"??""}`),i(tt,`Referent: ${e(n).mainEvaluatorId?Ke[_[e(n).mainEvaluatorId].academicLevel]+_[e(n).mainEvaluatorId].firstName+" "+_[e(n).mainEvaluatorId].lastName:"-"}`),i(st,`Punkte Arbeit: ${e(n).mainEvaluatorWorkMark??"-"??""}`),i(at,`Punkte Kolloquium: ${e(n).mainEvaluatorColloquiumMark??"-"??""}`),i(lt,`Korreferent: ${e(n).secondEvaluatorId?Ke[_[e(n).secondEvaluatorId].academicLevel]+_[e(n).secondEvaluatorId].firstName+" "+_[e(n).secondEvaluatorId].lastName:"-"}`),i(rt,`Punkte Arbeit: ${e(n).secondEvaluatorWorkMark??"-"??""}`),i(nt,`Punkte Kolloquium: ${e(n).secondEvaluatorColloquiumMark??"-"??""}`)},[()=>e(n).startDate?String(e(n).startDate.toReversed()).replaceAll(",","."):"-",()=>e(n).endDate?String(e(n).endDate.toReversed()).replaceAll(",","."):"-",()=>e(n).colloquium?String(e(n).colloquium.toReversed().splice(2)).replaceAll(",","."):"-"]),f(t,a)},Ye=t=>{var a=Wt();f(t,a)};Se(Je,t=>{e(n)!=0?t(Qe):t(Ye,!1)})}s(De),s(re),R(()=>{k(Ae,"src",Et),i(qe,e(Me)?"Filter: Ein":"Filter: Aus"),k(Ue,"src",e(U)?It:At)}),pt(oe,()=>e(H),t=>g(H,t)),f(I,re),_t()}ut(["input","click"]);export{es as component,Yt as universal};
